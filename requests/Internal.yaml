PartnerSync:
  post:
    operationId: partnerSync
    summary: Request Partner Sync
    description: |
      Request a sync with a partner
    tags:
      - Internal
      - Partners
    parameters:
      - name: bucket
        in: path
        required: true
        schema:
          $ref: 'shared.yaml#/schemas/bucket'
      - name: partner
        in: path
        required: true
        description: The partner to sync with e.g. mailchimp, gocardless, stripe
        schema:
          type: string
          enum:
            - clio
            - gocardless
            - mailchimp
            - mryum
            - stripe
      - name: action
        in: path
        required: true
        description: The action to perform e.g. pull, push
        schema:
          type: string
          enum:
            - pull
            - push
      - name: data_type
        in: path
        required: true
        schema:
          type: string
          enum:
            - contacts
            - consents
            - payments
        description: The data type to sync e.g. contacts, payments
      - name: since_hours
        in: query
        required: false
        schema:
          type: integer
          description: |
            The number of hours to look back for changes
            e.g. 24 would look back 24 hours for changes
          default: 24
      - name: create_contacts
        in: query
        required: false
        schema:
          type: boolean
          description: |
            If the data_type is contacts, should new contacts be created?
      - name: full
        in: query
        required: false
        schema:
          type: boolean
          description: |
            Where supported a full sync will override the since_hours parameter
    responses:
      $ref: 'shared.yaml#/responses/standard'

MembershipTypeExtras:
  get:
    operationId: getMembershipTypeExtras
    summary: Membership Plan - Extra settings
    description: |
      Get the extra settings for a membership plan
    tags:
      - Membership
      - Internal
    parameters:
      $ref: 'shared.yaml#/parameters/bucket_and_uid'
    responses:
      $ref: 'shared.yaml#/responses/standard'

MembershipTypeExtrasAdditionalField:
  post:
    operationId: updateMembershipTypeExtras
    summary: Membership Plan - Extras - Add additional field
    description: |
      Add an additional user input field to a membership plan
    tags:
      - Membership
      - Internal
    parameters:
      - name: bucket
        in: path
        required: true
        schema:
          $ref: 'shared.yaml#/schemas/bucket'
      - name: uid
        in: path
        required: true
        schema:
          $ref: 'shared.yaml#/schemas/uid'
      - name: label
        in: query
        required: true
        schema:
          type: string
          description: The label for the field that will be shown to the user
      - name: field
        in: query
        required: false
        schema:
          type: string
          description: The field name, if not provided the label will be slugified
      - name: description
        in: query
        required: true
        schema:
          type: string
          description: A description of the field, shown to the user
      - name: form_type
        in: query
        required: true
        schema:
          type: string
          description: The type of field
          enum:
            - checkbox
            - date
            - email
            - number
            - person_record
            - select
            - tel
            - text
            - textarea
      - name: required
        in: query
        required: false
        schema:
          type: boolean
          description: Is this field required?
      - name: options
        in: query
        required: false
        schema:
          type: array
          description: |
            If the form_type is select, this is the list of options that will be shown to the user
          items:
            type: string
      - name: dob_required
        in: query
        required: false
        schema:
          type: boolean
          description: |
            If the form_type is person_record, is the date of birth required?

    responses:
      $ref: 'shared.yaml#/responses/standard'
  delete:
    operationId: deleteMembershipTypeExtras
    summary: Membership Plan - Extras - Remove additional field
    description: |
      Remove an additional user input field from a membership plan
    tags:
      - Membership
      - Internal
    parameters:
      - name: bucket
        in: path
        required: true
        schema:
          $ref: 'shared.yaml#/schemas/bucket'
      - name: uid
        in: path
        required: true
        schema:
          $ref: 'shared.yaml#/schemas/uid'
      - name: field
        in: query
        required: true
        schema:
          type: string
          description: The field name to be removed
    responses:
      $ref: 'shared.yaml#/responses/standard'

MembershipTypeExtrasCondition:
  post:
    operationId: updateMembershipTypeExtrasCondition
    summary: Membership Plan - Extras - Add condition
    description: |
      Add a condition to a membership plan
      e.g. Age: Under 18
    tags:
      - Membership
      - Internal
    parameters:
      - name: bucket
        in: path
        required: true
        schema:
          $ref: 'shared.yaml#/schemas/bucket'
      - name: uid
        in: path
        required: true
        schema:
          $ref: 'shared.yaml#/schemas/uid'
      - name: key
        in: query
        required: true
        schema:
          type: string
          description: The key element of the condition
      - name: value
        in: query
        required: true
        schema:
          type: string
          description: The value element of the condition
    responses:
      $ref: 'shared.yaml#/responses/standard'
  delete:
    operationId: deleteMembershipTypeExtrasCondition
    summary: Membership Plan - Extras - Remove condition
    description: |
      Remove a condition from a membership plan
    tags:
      - Membership
      - Internal
    parameters:
      - name: bucket
        in: path
        required: true
        schema:
          $ref: 'shared.yaml#/schemas/bucket'
      - name: uid
        in: path
        required: true
        schema:
          $ref: 'shared.yaml#/schemas/uid'
      - name: key
        in: query
        required: true
        schema:
          type: string
          description: The key element of the condition
    responses:
      $ref: 'shared.yaml#/responses/standard'
